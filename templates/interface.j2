# This file is generated by Ansible for {{ item.interface }}
[Match]
Name={{ item.interface }}

[Network]
{% if item.v4 is defined %}
# IPv4 configuration
Address={{ item.v4.ip }}
Gateway={{ item.v4.gateway }}
{% for dns_server in item.v4.nameserver %}
DNS={{ dns_server }}
{% endfor %}
{% endif %}

{% if item.v6 is defined %}
# IPv6 configuration
Address={{ item.v6.ip }}
{% if item.v6.gateway is defined %}
Gateway={{ item.v6.gateway }}
{% endif %}
{% for dns_server in item.v6.nameserver %}
DNS={{ dns_server }}
{% endfor %}
{% endif %}
{% if item.v4 is defined %}

{% if item.mandatory is defined %}
[Link]
RequiredForOnline={{ item.mandatory }}
{% endif %}

[DHCPv4]
RouteMetric={{ item.v4.route_metric | default(100) }}
{% endif %}
{% if item.v6 is defined %}

[IPv6AcceptRA]
RouteMetric={{ item.v6.route_metric | default(100) }}
{% endif %}
